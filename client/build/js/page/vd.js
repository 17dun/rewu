zeus.page({initDatas:function(){self.list=[]},initParts:function(){var t=this;t.parts={$form:$("#queryBox"),$table:$("#listBox")},t.getList()},bindEvent:function(){var t=this,i=t.parts.$form.find(".query-btn");i.on("click",function(){t.getList()});var e=t.parts.$form.find(".add-btn");e.on("click",function(){t.add()}),$("#listBody").on("click",".edit-btn",function(){t.edit(this)}),$("#listBody").on("click",".del-btn",function(){var i=$(this).parent().parent().data("itemid");t.del(i)}),$("#listBody").on("click",".del-btn",function(){var i=$(this).parent().parent().data("itemid");t.del(i)}),$("#listBox").on("click",".all-check",function(){t.allcheck($(this).is(":checked"))}),$(".delall-btn").on("click",function(){t.alldel()}),$(".import-btn").on("click",function(){t.imports()})},imports:function(t){var i=this;$("#importBox").dialog({title:"导入json",modal:!0,width:600,buttons:[{text:"保存",click:function(){var t=this;i.saveList(function(){i.getList(),i.msg(1),$(t).dialog("close")})}}]})},saveList:function(t){var i=this,e=$("#jsonObj").val();$.ajax({url:"/vd/saveList",type:"POST",dataType:"json",data:{list:e},success:function(i){t()},error:function(t){i.msg(0,"保存失败")}})},alldel:function(){var t=[];$(".item-check:checked").each(function(i,e){t.push($(e).parent().parent().data("itemid"))}),$.ajax({url:"/vd/delall",type:"POST",dataType:"json",data:{ids:t},success:function(t){t.code||self.getList()},error:function(t){}})},allcheck:function(t){$(".item-check").each(function(i,e){$(e).prop("checked",t)})},getList:function(){var t=this,i=t.parts.$form.serialize();$.ajax({url:"/vd/list",type:"GET",dataType:"json",data:i,success:function(i){t.list=i.data,t.renderList()},error:function(t){}})},renderList:function(){$("#listBody").empty(),$("#listTemp").tmpl(self.list).appendTo("#listBody")},add:function(){var t=this;t.edit()},renderEdit:function(t){$("#editBox").empty(),$("#editFormTemp").tmpl(t).appendTo("#editBox")},edit:function(t){var i=this;if(t)var e=$(".edit-btn").index(t),n=i.list[e];else;i.renderEdit(n),$("#editBox").dialog({title:"编辑",modal:!0,width:300,buttons:[{text:"保存",click:function(){var t=this;i.save(function(){i.getList(),i.msg(1),$(t).dialog("close")})}}]})},save:function(t){var i=this,e=$("#editform").serialize();$.ajax({url:"/vd/save",type:"GET",dataType:"json",data:e,success:function(i){t()},error:function(t){i.msg(0,"保存失败")}})},del:function(t){var i=this;$("#delBox").dialog({title:"警告",modal:!0,width:300,buttons:[{text:"确定",click:function(){$.ajax({url:"/vd/del?id="+t,type:"GET",dataType:"json",success:function(t){i.msg(1),i.getList()},error:function(t){i.msg(0)}}),$(this).dialog("close")}},{text:"取消",click:function(){$(this).dialog("close")}}]})},msg:function(t,i){var e=$("#bgMsg");t?(e.addClass("alert-success"),e.removeClass("alert-danger"),e.html("操作成功")):(e.addClass("alert-danger"),e.removeClass("alert-success"),e.html("操作失败")),i&&e.html(i),e.animate({opacity:1}),e.animate({opacity:0},800)}});